<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あなたに最適な副業診断</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; }
        
        /* 修正後：職業適性に合う自然な色（深い青緑色）のグラデーションに変更 */
        .gradient-bg {
            background: linear-gradient(135deg, #0f766e 0%, #0d9488 50%, #14b8a6 100%);
        }
        
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* 修正後：モバイル対応のレスポンシブテキスト設定 */
        .responsive-title {
            font-size: clamp(1.5rem, 4vw, 2.25rem);
            line-height: 1.2;
        }
        
        .responsive-subtitle {
            font-size: clamp(0.875rem, 3vw, 1.25rem);
        }

        /* 修正後：選択肢のボタンスタイルを3択形式に変更（はい・いいえ・どちらでもない風） */
        .choice-button {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
            background: white;
        }
        
        .choice-button:hover {
            border-color: #0d9488;
            background-color: #f0fdfa;
            transform: translateY(-1px);
        }
        
        .choice-button.selected {
            border-color: #0d9488;
            background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);
            box-shadow: 0 4px 12px rgba(13, 148, 136, 0.15);
        }

        /* 職業カード用の色分け */
        .job-card-it {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left-color: #3b82f6;
        }
        
        .job-card-design {
            background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
            border-left-color: #ec4899;
        }
        
        .job-card-writing {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: #10b981;
        }
        
        .job-card-business {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left-color: #f59e0b;
        }
        
        .job-card-education {
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
            border-left-color: #8b5cf6;
        }
        
        .job-card-consulting {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-left-color: #ef4444;
        }
        
        .job-card-creative {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border-left-color: #0ea5e9;
        }

        /* モバイルでの改行問題を解決 */
        @media (max-width: 640px) {
            .mobile-text-adjust {
                word-break: keep-all;
                overflow-wrap: break-word;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 md:py-8">
        <div class="container mx-auto px-4 text-center">
            <h1 class="responsive-title font-bold mb-2 mobile-text-adjust">副業診断システム</h1>
            <p class="responsive-subtitle opacity-90 mobile-text-adjust">あなたに最適な副業を見つけましょう</p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-6 md:py-8">
        <!-- 質問フォーム -->
        <div id="questionForm" class="max-w-2xl mx-auto bg-white rounded-lg card-shadow p-6 md:p-8">
            <div class="mb-6 md:mb-8">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-2">
                    <span class="text-sm font-medium text-gray-500">質問 <span id="currentQuestion">1</span> / 6</span>
                    <div class="w-full sm:w-32 bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-teal-500 h-2 rounded-full transition-all duration-300" style="width: 16.67%"></div>
                    </div>
                </div>
            </div>

            <div id="question1" class="question-slide">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">あなたのスキルレベルは？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="skillLevel" value="beginner" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">初心者</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">新しいことを学ぶのが好き</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="skillLevel" value="intermediate" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">中級者</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">基本的なスキルはある</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="skillLevel" value="advanced" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">上級者</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">専門的な知識・経験がある</div>
                        </div>
                    </label>
                </div>
            </div>

            <div id="question2" class="question-slide hidden">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">1日にどのくらい時間を使えますか？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="timeAvailable" value="1hour" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">1時間未満</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">スキマ時間を有効活用</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="timeAvailable" value="2-3hours" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">2-3時間</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">平日の夜や週末に作業</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="timeAvailable" value="4hours+" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">4時間以上</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">しっかりと時間を確保できる</div>
                        </div>
                    </label>
                </div>
            </div>

            <div id="question3" class="question-slide hidden">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">興味のある分野は？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="interest" value="it" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">IT・プログラミング</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">Webサイト制作、アプリ開発など</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="interest" value="design" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">デザイン・クリエイティブ</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">ロゴ制作、動画編集など</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="interest" value="writing" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">ライティング・コンテンツ</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">記事執筆、ブログなど</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="interest" value="business" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">ビジネス・販売</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">物販、コンサルティングなど</div>
                        </div>
                    </label>
                </div>
            </div>

            <div id="question4" class="question-slide hidden">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">月の収入目標は？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="income" value="low" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">1-5万円</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">お小遣い程度の収入</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="income" value="medium" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">5-15万円</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">生活の足しになる収入</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="income" value="high" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">15万円以上</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">本格的な収入を目指す</div>
                        </div>
                    </label>
                </div>
            </div>

            <div id="question5" class="question-slide hidden">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">働く場所の希望は？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="location" value="home" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">在宅中心</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">自宅で完結する仕事</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="location" value="flexible" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">どちらでも</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">在宅・外出問わない</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="location" value="outside" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">外出中心</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">人と会ったり外で活動</div>
                        </div>
                    </label>
                </div>
            </div>

            <div id="question6" class="question-slide hidden">
                <h2 class="text-xl md:text-2xl font-semibold mb-6 mobile-text-adjust">どのような働き方を希望しますか？</h2>
                <div class="space-y-3">
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="workStyle" value="flexible" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">自分のペース</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">時間や場所に縛られない</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="workStyle" value="structured" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">決まった時間</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">スケジュールが決まっている</div>
                        </div>
                    </label>
                    <label class="choice-button flex items-center p-4 rounded-lg cursor-pointer">
                        <input type="radio" name="workStyle" value="project" class="mr-3 hidden">
                        <div class="flex-1">
                            <div class="font-medium mobile-text-adjust">プロジェクト単位</div>
                            <div class="text-sm text-gray-600 mobile-text-adjust">案件ごとに集中して取り組む</div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row justify-between mt-6 md:mt-8 gap-3 sm:gap-0">
                <button id="prevBtn" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors order-2 sm:order-1 hidden">前へ</button>
                <button id="nextBtn" class="px-6 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors order-1 sm:order-2 sm:ml-auto">次へ</button>
                <button id="submitBtn" class="px-8 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors order-1 sm:order-2 sm:ml-auto hidden">診断結果を見る</button>
            </div>
        </div>

        <!-- 結果表示 -->
        <div id="resultSection" class="max-w-4xl mx-auto hidden">
            <div class="bg-white rounded-lg card-shadow p-6 md:p-8 mb-6">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8 text-gray-800 mobile-text-adjust">あなたにおすすめの副業</h2>
                <div id="recommendedJobs" class="space-y-6">
                    <!-- 結果がここに表示されます -->
                </div>
            </div>
            <div class="text-center">
                <button id="restartBtn" class="px-8 py-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors">もう一度診断する</button>
            </div>
        </div>
    </div>

    <script>
        // 副業データベース（修正後：職業ごとにカテゴリを追加）
        const jobDatabase = {
            webDeveloper: {
                title: "Webサイト制作",
                description: "企業や個人のWebサイトを制作する仕事。HTML、CSS、JavaScriptなどの技術を使用。",
                income: "月5-30万円",
                timeRequired: "週10-20時間",
                difficulty: "中級～上級",
                category: "it",
                url: "https://example.com/web-development-info"
            },
            dataEntry: {
                title: "データ入力・事務作業",
                description: "Excel入力、資料作成、データ整理などの事務作業。初心者でも始めやすい。",
                income: "月1-8万円",
                timeRequired: "週5-15時間",
                difficulty: "初級",
                category: "business",
                url: "https://example.com/data-entry-info"
            },
            contentWriting: {
                title: "記事ライティング",
                description: "ブログ記事、商品説明、SEO記事などの文章作成。文章力を活かせる。",
                income: "月3-20万円",
                timeRequired: "週8-25時間",
                difficulty: "初級～中級",
                category: "writing",
                url: "https://example.com/content-writing-info"
            },
            graphicDesign: {
                title: "グラフィックデザイン",
                description: "ロゴ、バナー、チラシなどのデザイン制作。デザインスキルが必要。",
                income: "月5-25万円",
                timeRequired: "週10-20時間",
                difficulty: "中級～上級",
                category: "design",
                url: "https://example.com/graphic-design-info"
            },
            onlineTutoring: {
                title: "オンライン講師",
                description: "オンラインで語学や専門スキルを教える。知識を活かして収入を得られる。",
                income: "月8-30万円",
                timeRequired: "週8-20時間",
                difficulty: "中級～上級",
                category: "education",
                url: "https://example.com/online-tutoring-info"
            },
            consulting: {
                title: "コンサルティング",
                description: "専門知識を活かしてビジネスアドバイスを提供。高収入が期待できる。",
                income: "月15-50万円",
                timeRequired: "週10-25時間",
                difficulty: "上級",
                category: "consulting",
                url: "https://example.com/consulting-info"
            },
            photography: {
                title: "写真撮影・販売",
                description: "写真撮影やストックフォトの販売。クリエイティブな仕事。",
                income: "月3-15万円",
                timeRequired: "週5-15時間",
                difficulty: "初級～中級",
                category: "creative",
                url: "https://example.com/photography-info"
            },
            videoEditing: {
                title: "動画編集",
                description: "YouTube動画や企業PR動画の編集。動画スキルが求められる成長分野。",
                income: "月8-40万円",
                timeRequired: "週12-30時間",
                difficulty: "中級～上級",
                category: "creative",
                url: "https://example.com/video-editing-info"
            }
        };

        // 診断ロジック
        function recommendJobs(answers) {
            const recommendations = [];
            
            // スキルレベル・興味・時間・収入目標に基づいて判定
            if (answers.interest === 'it') {
                if (answers.skillLevel === 'advanced') {
                    recommendations.push('webDeveloper', 'consulting');
                } else if (answers.skillLevel === 'intermediate') {
                    recommendations.push('webDeveloper', 'dataEntry');
                } else {
                    recommendations.push('dataEntry', 'contentWriting');
                }
            } else if (answers.interest === 'design') {
                if (answers.skillLevel === 'advanced') {
                    recommendations.push('graphicDesign', 'videoEditing');
                } else {
                    recommendations.push('photography', 'graphicDesign');
                }
            } else if (answers.interest === 'writing') {
                recommendations.push('contentWriting', 'onlineTutoring');
            } else if (answers.interest === 'business') {
                if (answers.skillLevel === 'advanced') {
                    recommendations.push('consulting', 'onlineTutoring');
                } else {
                    recommendations.push('dataEntry', 'contentWriting');
                }
            }

            // 時間制約による調整
            if (answers.timeAvailable === '1hour') {
                recommendations.push('dataEntry', 'photography');
            } else if (answers.timeAvailable === '4hours+') {
                recommendations.push('webDeveloper', 'videoEditing');
            }

            // 収入目標による調整
            if (answers.income === 'high') {
                recommendations.push('consulting', 'webDeveloper', 'videoEditing');
            }

            // 重複を削除し、最大3つまでに制限
            return [...new Set(recommendations)].slice(0, 3);
        }

        // UIコントロール
        let currentQuestionIndex = 1;
        const totalQuestions = 6;
        const answers = {};

        function updateProgress() {
            const progress = (currentQuestionIndex / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex;
        }

        function showQuestion(index) {
            // 全ての質問を非表示
            for (let i = 1; i <= totalQuestions; i++) {
                document.getElementById(`question${i}`).classList.add('hidden');
            }
            // 指定の質問を表示
            document.getElementById(`question${index}`).classList.remove('hidden');
            
            // ボタンの表示/非表示制御
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.classList.toggle('hidden', index === 1);
            
            if (index === totalQuestions) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        // 修正後：職業カテゴリごとに色を分けるためのクラス名取得関数
        function getJobCardClass(category) {
            const categoryClasses = {
                'it': 'job-card-it',
                'design': 'job-card-design', 
                'writing': 'job-card-writing',
                'business': 'job-card-business',
                'education': 'job-card-education',
                'consulting': 'job-card-consulting',
                'creative': 'job-card-creative'
            };
            return categoryClasses[category] || 'job-card-it';
        }

        function displayResults() {
            const recommendedJobKeys = recommendJobs(answers);
            const resultsContainer = document.getElementById('recommendedJobs');
            
            resultsContainer.innerHTML = '';
            
            recommendedJobKeys.forEach((jobKey, index) => {
                const job = jobDatabase[jobKey];
                const jobElement = document.createElement('div');
                const cardClass = getJobCardClass(job.category);
                jobElement.className = `${cardClass} p-4 md:p-6 rounded-lg border-l-4`;
                
                jobElement.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <h3 class="text-lg md:text-xl font-semibold text-gray-800 mb-2 mobile-text-adjust">${index + 1}. ${job.title}</h3>
                            <p class="text-gray-600 mb-4 text-sm md:text-base mobile-text-adjust">${job.description}</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-sm">
                                <div class="mobile-text-adjust">
                                    <span class="font-medium text-gray-700">収入目安:</span>
                                    <span class="text-green-600">${job.income}</span>
                                </div>
                                <div class="mobile-text-adjust">
                                    <span class="font-medium text-gray-700">時間:</span>
                                    <span class="text-blue-600">${job.timeRequired}</span>
                                </div>
                                <div class="mobile-text-adjust">
                                    <span class="font-medium text-gray-700">難易度:</span>
                                    <span class="text-purple-600">${job.difficulty}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                            <span class="text-xs md:text-sm text-gray-600 mobile-text-adjust">詳細な情報と始め方を無料で確認:</span>
                            <a href="${job.url}" target="_blank" class="bg-teal-500 hover:bg-teal-600 text-white px-3 md:px-4 py-2 rounded-lg text-xs md:text-sm transition-colors text-center">
                                無料で情報を取得する →
                            </a>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(jobElement);
            });
            
            // フォームを非表示にして結果を表示
            document.getElementById('questionForm').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');
        }

        // 修正後：選択肢のボタン選択スタイルを改善
        function handleChoiceSelection(label, input) {
            // 同じname属性の他の選択肢からselectedクラスを削除
            const allChoices = document.querySelectorAll(`input[name="${input.name}"]`);
            allChoices.forEach(choice => {
                choice.closest('label').classList.remove('selected');
            });
            
            // 選択された選択肢にselectedクラスを追加
            label.classList.add('selected');
            input.checked = true;
        }

        // イベントリスナー
        document.getElementById('nextBtn').addEventListener('click', () => {
            // 現在の質問の回答を保存
            const currentQuestion = document.getElementById(`question${currentQuestionIndex}`);
            const selectedOption = currentQuestion.querySelector('input[type="radio"]:checked');
            
            if (!selectedOption) {
                alert('選択肢を選んでください。');
                return;
            }
            
            answers[selectedOption.name] = selectedOption.value;
            
            if (currentQuestionIndex < totalQuestions) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
                updateProgress();
            }
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentQuestionIndex > 1) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
                updateProgress();
            }
        });

        document.getElementById('submitBtn').addEventListener('click', () => {
            // 最後の質問の回答を保存
            const currentQuestion = document.getElementById(`question${currentQuestionIndex}`);
            const selectedOption = currentQuestion.querySelector('input[type="radio"]:checked');
            
            if (!selectedOption) {
                alert('選択肢を選んでください。');
                return;
            }
            
            answers[selectedOption.name] = selectedOption.value;
            displayResults();
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
            // リセット
            currentQuestionIndex = 1;
            Object.keys(answers).forEach(key => delete answers[key]);
            
            // フォームをリセット
            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.checked = false;
            });
            
            // 選択スタイルをリセット
            document.querySelectorAll('.choice-button').forEach(button => {
                button.classList.remove('selected');
            });
            
            // 表示を初期状態に戻す
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('questionForm').classList.remove('hidden');
            showQuestion(1);
            updateProgress();
        });

        // 修正後：選択肢クリック時のイベント処理を追加
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.choice-button').forEach(label => {
                label.addEventListener('click', (e) => {
                    const input = label.querySelector('input[type="radio"]');
                    handleChoiceSelection(label, input);
                });
            });
        });

        // 初期化
        showQuestion(1);
        updateProgress();
    </script>
</body>
</html>